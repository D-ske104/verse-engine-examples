<html>
  <head>
    <title>VerseEngine Demo</title>
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1,viewport-fit=cover"
    />
    <style>
      html,
      body {
        overscroll-behavior-y: none;
      }
      body {
        margin: 0;
        overflow: hidden;
        user-select: none;
        -webkit-user-select: none;
      }
      canvas {
        user-select: none;
        -webkit-user-select: none;
      }

      .a-enter-ar {
        display: none;
      }
    </style>
    <script src="https://cdn.jsdelivr.net/npm/aframe@1.4.1/dist/aframe-master.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/aframe-environment-component@1.3.2/dist/aframe-environment-component.min.js"></script>
    <script>
      if (!window.__extendAnimationLoop) {
        window.__extendAnimationLoop = () => {};
      }
      AFRAME.registerSystem("extend-animation-loop", {
        tick: function (time, timeDelta) {
          window.__extendAnimationLoop(time, timeDelta);
        },
      });
    </script>
    <script src="https://cdn.jsdelivr.net/npm/@pixiv/three-vrm@2.0.0/lib/three-vrm.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@verseengine/verse-three@1.0.6/dist/index.min.js"></script>
    <script src="./setup-verse.js"></script>
    <script>
      document.addEventListener("DOMContentLoaded", () => {
        const scene = document.querySelector("a-scene");
        scene.addEventListener("click", (e) => {
          const el = e.detail?.intersectedEl;
          if (el?.classList?.contains("box")) {
            if (el.getAttribute("color") === "#668CFF") {
              el.setAttribute("color", "#FF6347");
            } else {
              el.setAttribute("color", "#668CFF");
            }
          }
        });
      });
    </script>
  </head>
  <body>
    <div style="position: fixed; left: 0; top: 0; z-index: 1">
      <a href="https://verseengine.cloud/"
        ><img
          style="height: 35px"
          src="https://verseengine.cloud/images/logo.svg"
          alt="Verse Engine - Web-based Metaverse Engine on P2P overlay network"
      /></a>
    </div>
    <a-scene environment="ground: flat" renderer="colorManagement: true;">
      <a-entity id="player">
        <a-entity id="headOffset">
          <a-entity id="head" camera position="0 1.6 0"></a-entity>
        </a-entity>
      </a-entity>
      <a-box
        class="clickable box"
        color="#FF6347"
        position="0 1 -3"
        rotation="0 45 45"
        side="double"
        depth="1"
        height="1"
        width="1"
      ></a-box>
    </a-scene>
  </body>
</html>
